<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Org Type Quiz</title>
  <meta property="og:title" content="Is your organization's decision-making style working against you?" />
  <meta property="og:description" content="Take this quick quiz to find out—and unlock actionable steps to impress the board and empower your team." />
  <meta property="og:image" content="https://www.reflectplando.com/images/quiz-preview.png" />
  <meta property="og:url" content="https://www.reflectplando.com/quiz" />

  <style>
  body {
    font-family: 'Segoe UI', Tahoma, sans-serif;
    padding: 2rem 1rem;
    max-width: 640px;
    margin: auto;
    background-color: #4c5270;
    color: #4c5270;
    line-height: 1.5;
  }

  h1, h2 {
    text-align: center;
    color: #4c5270;
    font-weight: 600;
  }

  .quiz-hero-title {
  font-size: 1.8rem;
  font-weight: 700;
  color: #ff5757; 
  margin-bottom: 0.5rem;
  }

 .quiz-hero-subtitle {
  font-size: 1.1rem;
  line-height: 1.5;
  color: #fff; 
  margin-bottom: 0.5rem;
  }

  .question {
    background: #fff;
    padding: 1.25rem;
    border-radius: 12px;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
    margin-bottom: 1.5rem;
  }

  .question p {
    margin-top: 0;
    margin-bottom: 0.75rem;
    font-weight: 500;
    font-size: 1.1rem;
  }

  .question label {
    display: block;
    padding: 0.4rem 0;
    cursor: pointer;
  }

  input[type="radio"] {
    margin-right: 0.5rem;
  }

  button {
    background-color: #fff;
    color: #4c5270;
    border: none;
    padding: 0.6rem 1.2rem;
    font-size: 1rem;
    border-radius: 6px;
    cursor: pointer;
    transition: background-color 0.2s ease;
    display: block;
    margin: 1.5rem auto 0;
  }

  button:hover {
    background-color: #d9d9d9;
  }

  .result {
    background: #fff;
    padding: 1.5rem;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.07);
    margin-top: 2rem;
    text-align: center;
  }

  a.cta-button {
    display: inline-block;
    background-color: #7ed957;
    color: #fff;
    padding: 0.6rem 1.2rem;
    text-decoration: none;
    border-radius: 6px;
    font-weight: bold;
    margin-top: 1.5rem;
    transition: background-color 0.2s ease;
  }

  a.cta-button:hover {
    background-color: #c1ff72;
    color: #4c5270;
  }

  .restart-button {
    background-color: #4c5270;
    color: #fff;
    border: none;
    padding: 0.6rem 1.2rem;
    font-size: 1rem;
    border-radius: 6px;
    cursor: pointer;
    transition: background-color 0.2s ease;
    display: block;
    margin: 1.5rem auto 0;
  }

  .restart-button:hover {
  background-color: #7e87b2;
}

  .step {
    display: none;
  }

  .step.active {
    display: block;
  }

  #nextBtn {
  display: block;
  margin: 1.5rem auto 0;
  }
  
  </style>

</head>
<body>  
  <section style="text-align: center; padding: 2rem 1rem; max-width: 600px; margin: auto;">
  
<h1 class="quiz-hero-title">Is your organization's decision-making style working against you?</h1>

<p class="quiz-hero-subtitle">  
    Take this quick quiz to find out—and unlock actionable steps to impress the board and empower your team. 
</p>
</section>

  <form id="quizForm">
    <div class="step active" data-step="1">
      <div class="question">
        <p>What best describes how your team sets goals?</p>
        <label><input type="radio" name="q1" value="0,0" required /> We're guided by values but don't always have clear targets.</label><br/>
        <label><input type="radio" name="q1" value="0,1" /> We track progress toward program goals but not revenue.</label><br/>
        <label><input type="radio" name="q1" value="0,2" /> We have performance and financial metrics, but they're siloed.</label><br/>
        <label><input type="radio" name="q1" value="0,3" /> We set shared goals across departments with regular reviews.</label>
      </div>
    </div>
    <div class="step" data-step="2">
      <div class="question">
        <p>How accessible is your data to people across your team?</p>
        <label><input type="radio" name="q2" value="0,0" required /> Not accessible.</label><br/>
        <label><input type="radio" name="q2" value="1,0" /> Only select leaders have access.</label><br/>
        <label><input type="radio" name="q2" value="2,0" /> It's technically accessible, but underused.</label><br/>
        <label><input type="radio" name="q2" value="3,0" /> Easy to access and actively used in decision-making.</label>
      </div>
    </div>
    <div class="step" data-step="3">
      <div class="question">
        <p>What's your relationship with data?</p>
        <label><input type="radio" name="q3" value="0,0" required /> We collect data for funders, but it doesn't inform decisions.</label><br/>
        <label><input type="radio" name="q3" value="1,0" /> We wish we had better data but aren't sure where to start.</label><br/>
        <label><input type="radio" name="q3" value="2,0" /> We have plenty of data, but it's not always actionable.</label><br/>
        <label><input type="radio" name="q3" value="3,0" /> Integrated data from multiple teams/sources helps us make decisions and tell our story.</label>
      </div>
    </div>
    <div class="step" data-step="4">
      <div class="question">
        <p>How often do you revisit or adjust your metrics?</p>
        <label><input type="radio" name="q4" value="0,0" required /> Rarely. We mostly just report on what we already track.</label><br/>
        <label><input type="radio" name="q4" value="1,0" /> When funders ask or something major changes.</label><br/>
        <label><input type="radio" name="q4" value="2,0" /> We check in occasionally but don't have a set cadence.</label><br/>
        <label><input type="radio" name="q4" value="3,0" /> We regularly review and evolve our metrics based on performance and revenue outcomes.</label>
      </div>
    </div>
    <div class="step" data-step="5">
      <div class="question">
        <p>How do fundraising and programs work together?</p>
        <label><input type="radio" name="q5" value="0,0" required /> Like neighbors who nod but rarely talk.</label><br/>
        <label><input type="radio" name="q5" value="0,1" /> They team up when deadlines demand it.</label><br/>
        <label><input type="radio" name="q5" value="0,2" /> They share information but aren't truly aligned.</label><br/>
        <label><input type="radio" name="q5" value="0,3" /> They work closely and use shared metrics to plan and reflect.</label>
      </div>
    </div>
    <div class="step" data-step="6">
      <div class="question">
        <p>What challenge feels most familiar right now?</p>
        <label><input type="radio" name="q6" value="0,0" required /> We want to make a difference, but it's unclear what to focus on.</label><br/>
        <label><input type="radio" name="q6" value="0,1" /> We feel we're making a difference within our own team but don't know the effect on other teams.</label><br/>
        <label><input type="radio" name="q6" value="0,2" /> We have clear goals that are aligned across the organization and know we are making an impact, but accessing reports that demonstrate this is draining.</label><br/>
        <label><input type="radio" name="q6" value="0,3" /> Our goals are aligned, and we have access to accurate reports and/or dashboards to track progress and inform decisions in a timely manner.</label>
      </div>

      <button type="submit">See My Results</button>
    </div>
    <button type="button" id="nextBtn">Next</button>
  </form>

<div class="result" id="result" style="display:none;">
  <h2>Your Org Style: <span id="orgType"></span></h2>
  <p id="orgDesc"></p>

  <div class="cta-buttons" style="margin-top: 2rem; display: flex; flex-direction: column; gap: 1rem; align-items: center;">
    <a href="#" id="recommendationsLink" class="cta-button" target="_blank">See My Recommendations</a>
    <a href="#" id="plannerLink" class="cta-button" style="background-color: #ff5757;">Get My Personal Strategy Planner</a>
  </div>

  <p style="margin-top: 1.5rem;">
    <a href="#" id="restartLink" style="color: #4c5270; text-decoration: underline; font-size: 0.95rem;">
      Take the quiz again
    </a>
  </p>
</div>

<div id="plannerForm" style="display: none;" class="result">
  <h2>Unlock Your Personalized Strategy Planner</h2>
  <p style="text-align: center; margin-bottom: 2rem;">
    Based on your quiz results, this one-page guide helps you reflect, plan, and take action—on your own or with your team.
  </p>

  <div style="background: #fff; padding: 2rem; border-radius: 12px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.07);">
    <h3 style="margin-top: 0; color: #4c5270;">What You'll Get:</h3>
    <ul style="list-style: none; padding: 0; margin: 0 0 2rem 0;">
      <li style="margin-bottom: 0.5rem;">🧠 A quick guide to your org type and what it means</li>
      <li style="margin-bottom: 0.5rem;">💬 Coaching-style prompts to spark reflection and discussion</li>
      <li style="margin-bottom: 0.5rem;">🧭 Team-focused questions to turn insight into shared goals</li>
      <li style="margin-bottom: 0.5rem;">🚀 Clear next steps to move your mission forward</li>
    </ul>

    <form id="strategyPlannerForm">
      <div style="margin-bottom: 1rem;">
        <label for="email" style="display: block; margin-bottom: 0.5rem; color: #4c5270;">📧 Email Address*</label>
        <input type="email" id="email" name="email" required style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;">
      </div>

      <div style="margin-bottom: 1rem;">
        <label for="name" style="display: block; margin-bottom: 0.5rem; color: #4c5270;">👤 Name</label>
        <input type="text" id="name" name="name" style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;">
      </div>

      <div style="margin-bottom: 1rem;">
        <label for="title" style="display: block; margin-bottom: 0.5rem; color: #4c5270;">🪪 Title/Role</label>
        <input type="text" id="title" name="title" style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;">
      </div>

      <div style="margin-bottom: 1rem;">
        <label for="org" style="display: block; margin-bottom: 0.5rem; color: #4c5270;">🏢 Organization Name</label>
        <input type="text" id="org" name="org" style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;">
      </div>

      <div style="margin-bottom: 1.5rem;">
        <label style="display: flex; align-items: center; gap: 0.5rem; color: #4c5270;">
          <input type="checkbox" id="newsletter" name="newsletter">
          Keep me posted on new tools and trainings
        </label>
      </div>

      <button type="submit" class="cta-button" style="width: 100%; background-color: #7ed957;">Send My Personalized Planner</button>
    </form>

    <p style="text-align: center; margin-top: 1rem; font-size: 0.9rem; color: #666;">
      *We respect your time and inbox. No spam—just helpful tools.
    </p>
  </div>
</div>

  <script>
    const steps = document.querySelectorAll('.step');
    let currentStep = 0;
    const nextBtn = document.getElementById('nextBtn');

  nextBtn.addEventListener('click', () => {
  const currentInputs = steps[currentStep].querySelectorAll('input[type="radio"]');
  const oneChecked = Array.from(currentInputs).some(input => input.checked);

  if (!oneChecked) {
    alert("Please select an answer.");
    return;
  }

  steps[currentStep].classList.remove('active');
  currentStep++;
  steps[currentStep].classList.add('active');

  if (currentStep === steps.length - 1) {
    nextBtn.style.display = 'none';
  }
});


  const descriptions = {
  "Heart-Led Hustler": {
    text: "You lead with purpose, passion, and people in mind. Your mission inspires action—but without shared goals and structure, things can get chaotic. With the right support, your heart can drive even greater impact.",
    link: "https://www.reflectplando.com/heart-led-hustler"
  },
  "Insight Seeker": {
    text: "You ask the right questions and crave better data to guide your decisions. You value strategy and reflection—but without the right tools, insights can get stuck in silos. You're ready to turn curiosity into clarity—and clarity into action.",
    link: "https://www.reflectplando.com/insight-seeker"
  },
  "Resourceful Reactor": {
    text: "You're scrappy, responsive, and always ready to adapt. When challenges pop up, your team finds a way—but without clear systems, it's hard to sustain progress. You make things work in the moment—now it's time to build for what's next.",
    link: "https://www.reflectplando.com/resourceful-reactor"
  },
  "Mission Mover": {
    text: "You turn alignment into action. With clear goals, connected teams, and the right structure in place, your organization is ready for lift-off. You don't just talk about impact—you make it happen.",
    link: "https://www.reflectplando.com/mission-mover"
  }
};


    document.getElementById('quizForm').addEventListener('submit', function(e) {
      e.preventDefault();
      let formData = new FormData(this);
      let structure = 0, alignment = 0;
      for (let value of formData.values()) {
        let [s, a] = value.split(',').map(Number);
        structure += s;
        alignment += a;
      }

      let type = '';
           if (structure >= 7 && alignment >= 7) type = 'Mission Mover';
      else if (structure <= 6 && alignment >= 7) type = 'Insight Seeker';
      else if (structure <= 6 && alignment <= 6) type = 'Heart-Led Hustler';
      else if (structure >= 7 && alignment <= 6) type = 'Resourceful Reactor';
      else type = 'caseBreakline162';


      const answers = {};
let index = 1;
for (let value of formData.values()) {
  answers[`q${index}`] = value;
  index++;
}

sendToSheet({
  orgType: type,
  structure,
  alignment,
  answers,
  cta: '',         // will fill this in later when CTA is clicked
  name: '',        // placeholder for later
  title: '',
  email: '',
  org: '',
  function: ''
});


      
      document.getElementById('quizForm').style.display = 'none';
      document.getElementById('result').style.display = 'block';
     
      const emojiMap = {
  "Heart-Led Hustler": "❤️",
  "Insight Seeker": "🧭",
  "Resourceful Reactor": "🧨",
  "Mission Mover": "🚀"
};

document.getElementById('orgType').textContent = `${emojiMap[type]} ${type}`;

            
document.getElementById('orgDesc').innerHTML = `
  <p>${descriptions[type].text}</p>
`;

// Update the recommendations link based on org type
document.getElementById('recommendationsLink').href = descriptions[type].link;

// Update the planner link click handler
document.getElementById('plannerLink').addEventListener('click', (e) => {
  e.preventDefault();
  document.getElementById('result').style.display = 'none';
  document.getElementById('plannerForm').style.display = 'block';
});

    });

   document.getElementById('restartLink').addEventListener('click', (e) => {
  document.getElementById('result').style.display = 'none';
  document.getElementById('quizForm').style.display = 'block';
  steps.forEach((step, i) => {
    step.classList.remove('active');
    if (i === 0) step.classList.add('active');
  });
  currentStep = 0;
  nextBtn.style.display = 'inline-block';

  // Clear all answers
  document.querySelectorAll('input[type="radio"]').forEach(input => input.checked = false);
});

// Add form submission handler
document.getElementById('strategyPlannerForm').addEventListener('submit', function(e) {
  e.preventDefault();
  
  // Get form data
  const formData = {
    email: document.getElementById('email').value,
    name: document.getElementById('name').value,
    org: document.getElementById('org').value,
    title: document.getElementById('title').value,
    newsletter: document.getElementById('newsletter').checked,
    orgType: document.getElementById('orgType').textContent,
    // We'll add the quiz answers here in the next step
  };

  // For now, just log the data
  console.log('Form submitted:', formData);
  
  // We'll implement the planner generation and PDF creation in the next step
  alert('Strategy Planner generation coming soon!');
});




  function sendToSheet(data) {
    // Show loading state
    const submitButton = document.querySelector('button[type="submit"]');
    const originalButtonText = submitButton.textContent;
    submitButton.textContent = 'Saving...';
    submitButton.disabled = true;

    // Create a form submission
    const form = document.createElement('form');
    form.method = 'POST';
    form.action = 'https://script.google.com/macros/s/AKfycbwWixTRcao1qgiwNTuMD5SCMk6El9iSMFfD6N37zShkF2C289jIdIyojjlVTT6_ra55/exec';
    form.target = 'form-response'; // Target an iframe instead of new tab

    // Create and append iframe for response
    const iframe = document.createElement('iframe');
    iframe.name = 'form-response';
    iframe.style.display = 'none';
    document.body.appendChild(iframe);

    // Add all data as hidden inputs
    const formData = {
      orgType: data.orgType,
      structure: data.structure,
      alignment: data.alignment,
      q1: data.answers.q1,
      q2: data.answers.q2,
      q3: data.answers.q3,
      q4: data.answers.q4,
      q5: data.answers.q5,
      q6: data.answers.q6,
      ctaClicked: data.cta,
      name: data.name,
      title: data.title,
      email: data.email,
      orgName: data.org,
      orgFunction: data.function
    };

    // Create hidden inputs for each field
    Object.entries(formData).forEach(([key, value]) => {
      const input = document.createElement('input');
      input.type = 'hidden';
      input.name = key;
      input.value = value;
      form.appendChild(input);
    });

    // Add form to document, submit it, and remove it
    document.body.appendChild(form);
    form.submit();

    // Handle the response
    iframe.onload = function() {
      // Remove the iframe
      document.body.removeChild(iframe);
      document.body.removeChild(form);
      
      // Show success state
      submitButton.textContent = originalButtonText;
      submitButton.style.backgroundColor = '#7ed957';
      submitButton.style.color = '#fff';
      
      // Reset button after 2 seconds
      setTimeout(() => {
        submitButton.textContent = originalButtonText;
        submitButton.disabled = false;
        submitButton.style.backgroundColor = '';
        submitButton.style.color = '';
      }, 2000);
    };

    // Handle errors
    iframe.onerror = function() {
      submitButton.textContent = 'Error - Try Again';
      submitButton.disabled = false;
      alert('There was an error saving your results. Please try again.');
    };
  }


  </script>
  
  <div style="text-align: center; margin-top: 2rem;">
  <img
    src="https://lhearnsb.github.io/reflectplando-quiz/logo.png"
    alt="Reflect Plan Do Logo"
    style="max-width: 120px; height: auto;"
  />
</div>

</body>
</html>
